'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

exports.default = createAsyncActionsStateChecker;

var _constants = require('./constants');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var AsyncActionsStateChecker = function () {
  function AsyncActionsStateChecker() {
    var opt = arguments.length <= 0 || arguments[0] === void 0 ? {} : arguments[0];

    _classCallCheck(this, AsyncActionsStateChecker);

    this.allDone = null;
    this.errors = null;
    this.asyncActionsState = null;

    this.allDone = opt.allDone;
    this.errors = opt.errors;
    this.asyncActionsState = opt.asyncActionsState;
  }

  _createClass(AsyncActionsStateChecker, [{
    key: 'hasDone',
    value: function hasDone(checkFor) {
      var _this = this;

      if (!this.asyncActionsState) {
        return this.allDone;
      }

      var done = false;
      if (checkFor) {
        if (this.asyncActionsState[checkFor]) {
          var asyncState = this.asyncActionsState[checkFor].state;
          done = asyncState !== _constants.PENDING;
        }
      } else {
        var keys = Object.keys(this.asyncActionsState);
        done = keys.length > 0 && keys.filter(function (k) {
          return _this.asyncActionsState[k] && _this.asyncActionsState[k].state !== _constants.PENDING && _this.asyncActionsState[k].state !== _constants.INVALIDATED;
        }).length === keys.length;
      }

      return done;
    }
  }, {
    key: 'isPending',
    value: function isPending(checkFor) {
      var _this2 = this;

      if (!this.asyncActionsState) {
        return !this.allDone;
      }

      var pending = false;
      if (checkFor) {
        if (this.asyncActionsState[checkFor]) {
          var asyncState = this.asyncActionsState[checkFor].state;
          pending = asyncState === _constants.PENDING;
        }
      } else {
        var keys = Object.keys(this.asyncActionsState);
        pending = keys.length > 0 && keys.filter(function (k) {
          return _this2.asyncActionsState[k] && _this2.asyncActionsState[k].state === _constants.PENDING;
        }).length > 0;
      }

      return pending;
    }
  }, {
    key: 'getErrors',
    value: function getErrors() {
      var _this3 = this;

      if (!this.asyncActionsState) {
        return this.errors;
      }

      return Object.keys(this.asyncActionsState).filter(function (k) {
        return _this3.asyncActionsState[k] && _this3.asyncActionsState[k].state === _constants.FAILURE;
      }).map(function (k) {
        return _this3.asyncActionsState[k].error;
      });
    }
  }]);

  return AsyncActionsStateChecker;
}();

function createAsyncActionsStateChecker() {
  var store = arguments.length <= 0 || arguments[0] === void 0 ? {} : arguments[0];

  var asyncActionsStateChecker = void 0;
  if (store.asyncActionsState) {
    for (var _len = arguments.length, checkFor = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      checkFor[_key - 1] = arguments[_key];
    }

    if (!checkFor.length) {
      asyncActionsStateChecker = new AsyncActionsStateChecker({
        allDone: store.asyncActionsState.digested === store.asyncActionsState.asyncActionsStates.length,
        errors: store.asyncActionsState.failedActionsIndexes.map(function (i) {
          return store.asyncActionsState.asyncActionsStates[i].error;
        })

      });
    } else {
      (function () {
        var asyncActionsState = {};
        checkFor.forEach(function (k) {
          if ((typeof k === 'undefined' ? 'undefined' : _typeof(k)) === 'object' && k.group) {
            // manage groups
            var value = store.asyncActionsState.groups[k.group];

            if (value && value.length) {
              value.forEach(function (v) {
                var action = store.asyncActionsState.asyncActionsStates[v];
                asyncActionsState[action[_constants.ASYNC_UTILS_STATE_FOR]] = action;
              });
            }
          } else if (typeof k === 'string') {
            var _value = store.asyncActionsState.asyncActionsStates[store.asyncActionsState.indexes[k]];

            asyncActionsState[k] = _value;
          }
        });

        asyncActionsStateChecker = new AsyncActionsStateChecker({
          asyncActionsState: asyncActionsState
        });
      })();
    }
  } else {
    throw new Error('redux-async-utils: createAsyncActionsStateChecker ' + 'requires asyncActionsState reducer to be in the store');
  }

  return asyncActionsStateChecker;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jcmVhdGVBc3luY0FjdGlvbnNTdGF0ZUNoZWNrZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztrQkF3RndCOztBQXhGeEI7Ozs7SUFPTTtBQUtKLFdBTEksd0JBS0osR0FBc0I7UUFBVix5REFBTSxrQkFBSTs7MEJBTGxCLDBCQUtrQjs7U0FKdEIsVUFBVSxLQUlZO1NBSHRCLFNBQVMsS0FHYTtTQUZ0QixvQkFBb0IsS0FFRTs7QUFDcEIsU0FBSyxPQUFMLEdBQWUsSUFBSSxPQUFKLENBREs7QUFFcEIsU0FBSyxNQUFMLEdBQWMsSUFBSSxNQUFKLENBRk07QUFHcEIsU0FBSyxpQkFBTCxHQUF5QixJQUFJLGlCQUFKLENBSEw7R0FBdEI7O2VBTEk7OzRCQVdJLFVBQVU7OztBQUNoQixVQUFJLENBQUMsS0FBSyxpQkFBTCxFQUF3QjtBQUMzQixlQUFPLEtBQUssT0FBTCxDQURvQjtPQUE3Qjs7QUFJQSxVQUFJLE9BQU8sS0FBUCxDQUxZO0FBTWhCLFVBQUksUUFBSixFQUFjO0FBQ1osWUFBSSxLQUFLLGlCQUFMLENBQXVCLFFBQXZCLENBQUosRUFBc0M7QUFDcEMsY0FBTSxhQUFhLEtBQUssaUJBQUwsQ0FBdUIsUUFBdkIsRUFBaUMsS0FBakMsQ0FEaUI7QUFFcEMsaUJBQU8saUNBQVAsQ0FGb0M7U0FBdEM7T0FERixNQUtPO0FBQ0wsWUFBTSxPQUFPLE9BQU8sSUFBUCxDQUFZLEtBQUssaUJBQUwsQ0FBbkIsQ0FERDtBQUVMLGVBQVEsS0FBSyxNQUFMLEdBQWMsQ0FBZCxJQUFtQixLQUN4QixNQUR3QixDQUNqQixVQUFDLENBQUQsRUFBTztBQUNiLGlCQUNFLE1BQUssaUJBQUwsQ0FBdUIsQ0FBdkIsS0FDQSxNQUFLLGlCQUFMLENBQXVCLENBQXZCLEVBQTBCLEtBQTFCLHVCQURBLElBRUEsTUFBSyxpQkFBTCxDQUF1QixDQUF2QixFQUEwQixLQUExQiwyQkFGQSxDQUZXO1NBQVAsQ0FEaUIsQ0FReEIsTUFSd0IsS0FR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d0IsT0FBeEIsQ0FBZ0MsQ0FBaEMsQ0FGTixDQUFSLENBRDBCOztBQUtoQyw4QkFBa0IsQ0FBbEIsSUFBdUIsTUFBdkIsQ0FMZ0M7V0FBM0I7U0FmUSxDQUFqQjs7QUF3QkEsbUNBQTJCLElBQUksd0JBQUosQ0FBNkI7QUFDdEQsOENBRHNEO1NBQTdCLENBQTNCO1dBMUJLO0tBZFA7R0FERixNQTZDTztBQUNMLFVBQU0sSUFBSSxLQUFKLENBQ0osOEdBREksQ0FBTixDQURLO0dBN0NQOztBQW9EQSxTQUFPLHdCQUFQLENBdEQ4RTtDQUFqRSIsImZpbGUiOiJjcmVhdGVBc3luY0FjdGlvbnNTdGF0ZUNoZWNrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBQRU5ESU5HLFxuICBGQUlMVVJFLFxuICBJTlZBTElEQVRFRCxcbiAgQVNZTkNfVVRJTFNfU1RBVEVfRk9SLFxufSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmNsYXNzIEFzeW5jQWN0aW9uc1N0YXRlQ2hlY2tlciB7XG4gIGFsbERvbmUgPSBudWxsO1xuICBlcnJvcnMgPSBudWxsO1xuICBhc3luY0FjdGlvbnNTdGF0ZSA9IG51bGw7XG5cbiAgY29uc3RydWN0b3Iob3B0ID0ge30pIHtcbiAgICB0aGlzLmFsbERvbmUgPSBvcHQuYWxsRG9uZTtcbiAgICB0aGlzLmVycm9ycyA9IG9wdC5lcnJvcnM7XG4gICAgdGhpcy5hc3luY0FjdGlvbnNTdGF0ZSA9IG9wdC5hc3luY0FjdGlvbnNTdGF0ZTtcbiAgfVxuXG4gIGhhc0RvbmUoY2hlY2tGb3IpIHtcbiAgICBpZiAoIXRoaXMuYXN5bmNBY3Rpb25zU3RhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFsbERvbmU7XG4gICAgfVxuXG4gICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICBpZiAoY2hlY2tGb3IpIHtcbiAgICAgIGlmICh0aGlzLmFzeW5jQWN0aW9uc1N0YXRlW2NoZWNrRm9yXSkge1xuICAgICAgICBjb25zdCBhc3luY1N0YXRlID0gdGhpcy5hc3luY0FjdGlvbnNTdGF0ZVtjaGVja0Zvcl0uc3RhdGU7XG4gICAgICAgIGRvbmUgPSBhc3luY1N0YXRlICE9PSBQRU5ESU5HO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5hc3luY0FjdGlvbnNTdGF0ZSk7XG4gICAgICBkb25lID0gKGtleXMubGVuZ3RoID4gMCAmJiBrZXlzXG4gICAgICAgIC5maWx0ZXIoKGspID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5hc3luY0FjdGlvbnNTdGF0ZVtrXSAmJlxuICAgICAgICAgICAgdGhpcy5hc3luY0FjdGlvbnNTdGF0ZVtrXS5zdGF0ZSAhPT0gUEVORElORyAmJlxuICAgICAgICAgICAgdGhpcy5hc3luY0FjdGlvbnNTdGF0ZVtrXS5zdGF0ZSAhPT0gSU5WQUxJREFURURcbiAgICAgICAgICApO1xuICAgICAgICB9KVxuICAgICAgICAubGVuZ3RoID09PSBrZXlzLmxlbmd0aClcbiAgICAgIDtcbiAgICB9XG5cblxuICAgIHJldHVybiBkb25lO1xuICB9XG5cbiAgaXNQZW5kaW5nKGNoZWNrRm9yKSB7XG4gICAgaWYgKCF0aGlzLmFzeW5jQWN0aW9uc1N0YXRlKSB7XG4gICAgICByZXR1cm4gIXRoaXMuYWxsRG9uZTtcbiAgICB9XG5cbiAgICBsZXQgcGVuZGluZyA9IGZhbHNlO1xuICAgIGlmIChjaGVja0Zvcikge1xuICAgICAgaWYgKHRoaXMuYXN5bmNBY3Rpb25zU3RhdGVbY2hlY2tGb3JdKSB7XG4gICAgICAgIGNvbnN0IGFzeW5jU3RhdGUgPSB0aGlzLmFzeW5jQWN0aW9uc1N0YXRlW2NoZWNrRm9yXS5zdGF0ZTtcbiAgICAgICAgcGVuZGluZyA9IGFzeW5jU3RhdGUgPT09IFBFTkRJTkc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmFzeW5jQWN0aW9uc1N0YXRlKTtcbiAgICAgIHBlbmRpbmcgPSAoa2V5cy5sZW5ndGggPiAwICYmIGtleXNcbiAgICAgICAgLmZpbHRlcigoaykgPT4ge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLmFzeW5jQWN0aW9uc1N0YXRlW2tdICYmXG4gICAgICAgICAgICB0aGlzLmFzeW5jQWN0aW9uc1N0YXRlW2tdLnN0YXRlID09PSBQRU5ESU5HXG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmxlbmd0aCA+IDApXG4gICAgICA7XG4gICAgfVxuXG5cbiAgICByZXR1cm4gcGVuZGluZztcbiAgfVxuXG4gIGdldEVycm9ycygpIHtcbiAgICBpZiAoIXRoaXMuYXN5bmNBY3Rpb25zU3RhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmVycm9ycztcbiAgICB9XG5cbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5hc3luY0FjdGlvbnNTdGF0ZSlcbiAgICAgIC5maWx0ZXIoKGspID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNBY3Rpb25zU3RhdGVba10gJiYgdGhpcy5hc3luY0FjdGlvbnNTdGF0ZVtrXS5zdGF0ZSA9PT0gRkFJTFVSRTtcbiAgICAgIH0pXG4gICAgICAubWFwKGsgPT4gdGhpcy5hc3luY0FjdGlvbnNTdGF0ZVtrXS5lcnJvcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQXN5bmNBY3Rpb25zU3RhdGVDaGVja2VyKHN0b3JlID0ge30sIC4uLmNoZWNrRm9yKSB7XG4gIGxldCBhc3luY0FjdGlvbnNTdGF0ZUNoZWNrZXI7XG4gIGlmIChzdG9yZS5hc3luY0FjdGlvbnNTdGF0ZSkge1xuICAgIGlmICghY2hlY2tGb3IubGVuZ3RoKSB7XG4gICAgICBhc3luY0FjdGlvbnNTdGF0ZUNoZWNrZXIgPSBuZXcgQXN5bmNBY3Rpb25zU3RhdGVDaGVja2VyKHtcbiAgICAgICAgYWxsRG9uZTogKFxuICAgICAgICAgIHN0b3JlLmFzeW5jQWN0aW9uc1N0YXRlLmRpZ2VzdGVkID09PSBzdG9yZS5hc3luY0FjdGlvbnNTdGF0ZS5hc3luY0FjdGlvbnNTdGF0ZXMubGVuZ3RoXG4gICAgICAgICksXG4gICAgICAgIGVycm9yczogc3RvcmVcbiAgICAgICAgICAuYXN5bmNBY3Rpb25zU3RhdGVcbiAgICAgICAgICAuZmFpbGVkQWN0aW9uc0luZGV4ZXMubWFwKGkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHN0b3JlXG4gICAgICAgICAgICAgIC5hc3luY0FjdGlvbnNTdGF0ZVxuICAgICAgICAgICAgICAuYXN5bmNBY3Rpb25zU3RhdGVzW2ldLmVycm9yO1xuICAgICAgICAgIH0pXG4gICAgICAgICxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhc3luY0FjdGlvbnNTdGF0ZSA9IHt9O1xuICAgICAgY2hlY2tGb3IuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGsgPT09ICdvYmplY3QnICYmIGsuZ3JvdXApIHtcbiAgICAgICAgICAvLyBtYW5hZ2UgZ3JvdXBzXG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBzdG9yZVxuICAgICAgICAgIC5hc3luY0FjdGlvbnNTdGF0ZVxuICAgICAgICAgIC5ncm91cHNbay5ncm91cF07XG5cbiAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHN0b3JlXG4gICAgICAgICAgICAgIC5hc3luY0FjdGlvbnNTdGF0ZVxuICAgICAgICAgICAgICAuYXN5bmNBY3Rpb25zU3RhdGVzW3ZdO1xuICAgICAgICAgICAgICBhc3luY0FjdGlvbnNTdGF0ZVthY3Rpb25bQVNZTkNfVVRJTFNfU1RBVEVfRk9SXV0gPSBhY3Rpb247XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGsgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBzdG9yZVxuICAgICAgICAgIC5hc3luY0FjdGlvbnNTdGF0ZVxuICAgICAgICAgIC5hc3luY0FjdGlvbnNTdGF0ZXNbc3RvcmUuYXN5bmNBY3Rpb25zU3RhdGUuaW5kZXhlc1trXV07XG5cbiAgICAgICAgICBhc3luY0FjdGlvbnNTdGF0ZVtrXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYXN5bmNBY3Rpb25zU3RhdGVDaGVja2VyID0gbmV3IEFzeW5jQWN0aW9uc1N0YXRlQ2hlY2tlcih7XG4gICAgICAgIGFzeW5jQWN0aW9uc1N0YXRlLFxuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGByZWR1eC1hc3luYy11dGlsczogY3JlYXRlQXN5bmNBY3Rpb25zU3RhdGVDaGVja2VyIGAgK1xuICAgICAgYHJlcXVpcmVzIGFzeW5jQWN0aW9uc1N0YXRlIHJlZHVjZXIgdG8gYmUgaW4gdGhlIHN0b3JlYFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gYXN5bmNBY3Rpb25zU3RhdGVDaGVja2VyO1xufVxuIl19